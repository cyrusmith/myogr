= render 'js'
= form_for @namespace + [@record] do |f|
  - if @record.errors.any?
    #error_explanation
      %h2= "#{pluralize(@record.errors.count, "error")} prohibited this record from being saved:"
      %ul
        - @record.errors.full_messages.each do |msg|
          %li= msg

  %p= t('record.employee')
  %ul#employees
    %li
      = f.radio_button :employee, 'any', checked:true
      = f.label :employee, "Любой мастер", :value => 'any'
    - @employees.each do |employee|
      %li
        = f.radio_button :employee, employee.id, {}
        = f.label :employee, :value => employee.id do
          = employee.first_name
          %span= employee.position

  %ul#procedures
    - @procedures.each do |procedure|
      %li{:id => procedure.id}
        = f.radio_button :procedure, procedure.id, { :duration => procedure.duration.to_s }
        = f.label :procedure, :value => procedure.id do
          = procedure.name
          %span= procedure.duration.to_s

  %p= t('record.record_date')
  %div#record_dates.field
    = f.radio_button :record_date, Date.today + 1
    = f.label 'record_date_' + (Date.today + 1.day).to_s, t('tommorow')
    = f.radio_button :record_date, Date.today + 2
    = f.label 'record_date_' + (Date.today + 2.day).to_s, t('day_after_tommorow')
    = f.radio_button :record_date, 'other'
    = f.label 'record_date_other', t('other_day')

  %table#avaliable_time
    %tr
      %td 
        %b утро
      - @time_model[:morning].each do |time|
        %td
          = f.radio_button :record_time, time, {time: format_to_plain_time(time), class: 'time'}
          = f.label :record_time, format_to_clock_time(time), {value: time, time: format_to_plain_time(time)}
    %tr
      %td 
        %b День
      - @time_model[:afternoon].each do |time|
        %td
          = f.radio_button :record_time, time, {time: format_to_plain_time(time), class: 'time'}
          = f.label :record_time, format_to_clock_time(time), {value: time, time: format_to_plain_time(time)}
    %tr
      %td 
        %b Вечер
      - @time_model[:evening].each do |time|
        %td
          = f.radio_button :record_time, time, {time: format_to_plain_time(time), class: 'time'}
          = f.label :record_time, format_to_clock_time(time), {value: time, time: format_to_plain_time(time)}
  .field
    = f.label :contact_phone
    = f.text_field :contact_phone, value: @record.contact_phone.blank? ? user.phone : @record.contact_phone
  .field
    = f.label :contact_name
    = f.text_field :contact_name
  .hidden
    = hidden_field_tag 'record[group]', @group
    = hidden_field_tag 'record[full_time]'
  .actions
    = f.submit 'Save', id: 'submit', disabled: 'disabled'
